<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.plan.model.mapper.PlanMapper">
	<resultMap type="planDto" id="plan">
		<result column="id" property="id"/>
		<result column="title" property="title"/>
		<result column="member_id" property="memberId"/>
		<result column="start_date" property="startDate"/>
		<result column="end_date" property="endDate"/>
	</resultMap>
	
	<insert id="addPlan" parameterType="planDto">
		insert into plan (title, member_id, start_date, end_date)
		values (#{title}, #{memberId}, #{startDate}, #{endDate})
		<selectKey resultType="Long" keyProperty="id" order="AFTER">
			select last_insert_id()
		</selectKey>
	</insert>
	
	<delete id="deletePlan" parameterType="Long">
		delete from plan
		where id=#{id}
	</delete>
	
	<select id="findPlanById" parameterType="Long" resultMap="plan">
		select id, title, member_id, start_date, end_date
		from plan
		where id=#{id}
	</select>
	
	<select id="findPlansByMemberId" parameterType="String" resultMap="plan">
		select id, title, member_id, start_date, end_date
		from plan
		where member_id=#{memberId}
	</select>
	
	<select id="findAll" resultMap="plan">
		select id, title, member_id, start_date, end_date
		from plan
		order by id;
	</select>
</mapper>